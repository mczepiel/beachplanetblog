WebGLDebugUtils=function(){function e(e){if(null==p){p={};for(var t in e)"number"==typeof e[t]&&(p[e[t]]=t)}}function t(){if(null==p)throw"WebGLDebugUtils.init(ctx) not called"}function n(e){return t(),void 0!==p[e]}function i(e){t();var n=p[e];return void 0!==n?"gl."+n:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function r(e,t,n,r){var a=d[e];if(void 0!==a){var a=a[t];if(void 0!==a&&a[n])return i(r)}return null===r?"null":void 0===r?"undefined":""+r}function a(e,t){for(var n="",i=t.length,a=0;i>a;++a)n+=(0==a?"":", ")+r(e,i,a,t[a]);return n}function o(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function s(t,n,a){function s(e,t){return function(){a&&a(t,arguments);var i=e[t].apply(e,arguments),r=e.getError();return 0!=r&&(l[r]=!0,n(r,t,arguments)),i}}e(t),n=n||function(e,t,n){for(var a="",o=n.length,s=0;o>s;++s)a+=(0==s?"":", ")+r(t,o,s,n[s]);h("WebGL error "+i(e)+" in "+t+"("+a+")")};var l={},u={};for(var c in t)"function"==typeof t[c]?u[c]=s(t,c):o(u,t,c);return u.getError=function(){for(var e in l)if(l.hasOwnProperty(e)&&l[e])return l[e]=!1,e;return t.NO_ERROR},u}function l(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var i=0;t>i;++i)e.disableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(i,0);e.deleteBuffer(n);for(var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),i=0;r>i;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function u(e){function t(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}function n(e){var t=e.addEventListener;e.addEventListener=function(n,i){switch(n){case"webglcontextlost":w(i);break;case"webglcontextrestored":E(i);break;default:t.apply(e,arguments)}}}function i(){for(var e=Object.keys(S),t=0;e.length>t;++t)delete S[e]}function r(){++b,v||_==b&&e.loseContext()}function a(e,t){var n=e[t];return function(){if(r(),!v){var t=n.apply(e,arguments);return t}}}function s(){for(var e=0;g.length>e;++e){var t=g[e];t instanceof WebGLBuffer?h.deleteBuffer(t):t instanceof WebGLFramebuffer?h.deleteFramebuffer(t):t instanceof WebGLProgram?h.deleteProgram(t):t instanceof WebGLRenderbuffer?h.deleteRenderbuffer(t):t instanceof WebGLShader?h.deleteShader(t):t instanceof WebGLTexture&&h.deleteTexture(t)}}function u(e){return{statusMessage:e,preventDefault:function(){y=!0}}}function c(e){for(var t in e)"function"==typeof e[t]?d[t]=a(e,t):o(d,e,t);d.getError=function(){if(r(),!v)for(var e;e=h.getError();)S[e]=!0;for(var e in S)if(S[e])return delete S[e],e;return d.NO_ERROR};for(var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],i=0;n.length>i;++i){var s=n[i];d[s]=function(t){return function(){if(r(),v)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=f,g.push(n),n}}(e[s])}for(var l=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],i=0;l.length>i;++i){var s=l[i];d[s]=function(t){return function(){return r(),v?null:t.apply(e,arguments)}}(d[s])}for(var u=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],i=0;u.length>i;++i){var s=u[i];d[s]=function(t){return function(){return r(),v?!1:t.apply(e,arguments)}}(d[s])}return d.checkFramebufferStatus=function(t){return function(){return r(),v?d.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(d.checkFramebufferStatus),d.getAttribLocation=function(t){return function(){return r(),v?-1:t.apply(e,arguments)}}(d.getAttribLocation),d.getVertexAttribOffset=function(t){return function(){return r(),v?0:t.apply(e,arguments)}}(d.getVertexAttribOffset),d.isContextLost=function(){return v},d}var h,d,p=[],m=[],d={},f=1,v=!1,g=[],_=0,b=0,y=!1,C=0,S={};e.getContext=function(t){return function(){var n=t.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=h){if(h)throw"got different context";h=n,d=c(h)}return d}return n}}(e.getContext);var w=function(e){p.push(t(e))},E=function(e){m.push(t(e))};return n(e),e.loseContext=function(){if(!v){for(v=!0,_=0,++f;h.getError(););i(),S[h.CONTEXT_LOST_WEBGL]=!0;var t=u("context lost"),n=p.slice();setTimeout(function(){for(var i=0;n.length>i;++i)n[i](t);C>=0&&setTimeout(function(){e.restoreContext()},C)},0)}},e.restoreContext=function(){v&&m.length&&setTimeout(function(){if(!y)throw"can not restore. webglcontestlost listener did not call event.preventDefault";s(),l(h),v=!1,b=0,y=!1;for(var e=m.slice(),t=u("context restored"),n=0;e.length>n;++n)e[n](t)},0)},e.loseContextInNCalls=function(e){if(v)throw"You can not ask a lost contet to be lost";_=b+e},e.getNumCalls=function(){return b},e.setRestoreTimeout=function(e){C=e},e}var c=function(e){window.console&&window.console.log&&window.console.log(e)},h=function(e){window.console&&window.console.error?window.console.error(e):c(e)},d={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:!0}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}}},p=null;return{init:e,mightBeEnum:n,glEnumToString:i,glFunctionArgToString:r,glFunctionArgsToString:a,makeDebugContext:s,makeLostContextSimulatingCanvas:u,resetToInitialState:l}}();