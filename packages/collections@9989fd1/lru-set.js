"use strict";function LruSet(e,t,n,i,a){return this instanceof LruSet?(t=t||1/0,n=n||Object.equals,i=i||Object.hash,a=a||Function.noop,this.store=new Set(void 0,n,i),this.contentEquals=n,this.contentHash=i,this.getDefault=a,this.maxLength=t,this.length=0,this.addEach(e),void 0):new LruSet(e,t,n,i,a)}var Shim=require("./shim"),Set=require("./set"),GenericCollection=require("./generic-collection"),GenericSet=require("./generic-set"),PropertyChanges=require("./listen/property-changes"),RangeChanges=require("./listen/range-changes");module.exports=LruSet,LruSet.LruSet=LruSet,Object.addEach(LruSet.prototype,GenericCollection.prototype),Object.addEach(LruSet.prototype,GenericSet.prototype),Object.addEach(LruSet.prototype,PropertyChanges.prototype),Object.addEach(LruSet.prototype,RangeChanges.prototype),LruSet.prototype.constructClone=function(e){return new this.constructor(e,this.maxLength,this.contentEquals,this.contentHash,this.getDefault)},LruSet.prototype.has=function(e){return this.store.has(e)},LruSet.prototype.get=function(e){return e=this.store.get(e),void 0!==e?(this.store["delete"](e),this.store.add(e)):e=this.getDefault(e),e},LruSet.prototype.add=function(e){var t,n=this.store.has(e),i=[],a=[];return n?(this.store["delete"](e),this.store.add(e)):this.maxLength>0&&(i.push(e),this.length>=this.maxLength&&(t=this.store.order.head.next,a.push(t.value)),this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(i,a,0),this.store.add(e),a.length>0&&this.store["delete"](t.value),this.length=this.length+i.length-a.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(i,a,0)),i.length!==a.length},LruSet.prototype["delete"]=function(e){var t=this.store.has(e);return t&&(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],0),this.store["delete"](e),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],0)),t},LruSet.prototype.one=function(){return this.length>0?this.store.one():void 0},LruSet.prototype.clear=function(){this.store.clear(),this.length=0},LruSet.prototype.reduce=function(e,t){var n=arguments[2],i=this.store,a=0;return i.reduce(function(t,i){return e.call(n,t,i,a++,this)},t,this)},LruSet.prototype.reduceRight=function(e,t){var n=arguments[2],i=this.store,a=this.length-1;return i.reduceRight(function(t,i){return e.call(n,t,i,a--,this)},t,this)},LruSet.prototype.iterate=function(){return this.store.iterate()};