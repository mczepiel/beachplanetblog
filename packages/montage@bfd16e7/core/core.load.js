montageDefine("bfd16e7","core/core",{dependencies:["collections/shim","core/shim/object","core/shim/array","core/shim/string","core/extras/object","core/extras/date","core/extras/element","core/extras/function","core/extras/regexp","core/extras/string","core/uuid","collections/listen/property-changes","core/bindings","core/paths","core/serialization/bindings","core/promise"],factory:function(e,t){function n(e,t){var o=r+t+i;return e.hasOwnProperty(o)?e[o]:Object.defineProperty(e,o,{enumerable:!1,configurable:!1,writable:!0,value:Object.create(n(Object.getPrototypeOf(e),t))})[o]}e("collections/shim"),e("core/shim/object"),e("core/shim/array"),e("core/shim/string"),e("core/extras/object"),e("core/extras/date"),e("core/extras/element"),e("core/extras/function"),e("core/extras/regexp"),e("core/extras/string");var i="AttributeProperties",r="_",o="__proto__",a="value",s="enumerable",l="distinct",u="serializable",h=Array.prototype,c=Object.prototype,d=!0,p=t.Montage=function p(){};p.deprecate=function(e,t,n,i){var r=function(){var r=Error.stackTraceLimit;return Error.stackTraceLimit=2,"undefined"!=typeof console&&"function"==typeof console.warn&&(i?console.warn(n+" is deprecated, use "+i+" instead.",Error("").stack):console.warn(n,Error("").stack)),Error.stackTraceLimit=r,t.apply(e?e:this,arguments)};return r.deprecatedFunction=t,r},p.callDeprecatedFunction=function(e,t,n,i){var r,o,a=Error.stackTraceLimit;return Error.stackTraceLimit=2,"undefined"!=typeof console&&"function"==typeof console.warn&&(r=p.getInfoForObject(e).objectName,i?console.warn(n+" is deprecated, use "+i+" instead.",r):console.warn(n,r)),Error.stackTraceLimit=a,o=h.slice.call(arguments,4),t.apply(e?e:this,o)};var f={}.__proto__===Object.prototype,m={_montage_metadata:1,__state__:1},g=Object.getOwnPropertyNames(Function);if(Object.defineProperty(p,"specialize",{value:function(e,t){var n,i,r,o,a,s,l,u=this,h=this.specialize===void 0;if(e=e||Object.empty,t=t||Object.empty,n=e.constructor&&e.constructor.value?e.constructor.value:e.didCreate&&e.didCreate.value?p.deprecate(null,e.didCreate.value,"didCreate","constructor"):function(){return u.apply(this,arguments)||this},f)n.__proto__=u;else{r=Object.getOwnPropertyNames(u);for(var s=0;r.length>s;s++)o=r[s],m.hasOwnProperty(o)||(a=Object.getOwnPropertyDescriptor(n,o),(!a||a.configurable)&&p.defineProperty(n,o,Object.getOwnPropertyDescriptor(u,o)));n.__constructorProto__=u,p.defineProperty(n,"isPrototypeOf",{value:function(e){for(;null!==e;){if(Object.getPrototypeOf(e)===this)return!0;e=Object.getPrototypeOf(e)}return!1},enumerable:!1})}if(i=Object.create(this.prototype),h){for(r=Object.getOwnPropertyNames(p),s=0;r.length>s;s++)o=r[s],a=Object.getOwnPropertyDescriptor(n,o),(!a||a.configurable)&&p.defineProperty(n,o,Object.getOwnPropertyDescriptor(p,o));for(r=Object.getOwnPropertyNames(p.prototype),s=0;r.length>s;s++)o=r[s],a=Object.getOwnPropertyDescriptor(n,o),(!a||a.configurable)&&p.defineProperty(i,o,Object.getOwnPropertyDescriptor(p.prototype,o))}if(p.defineProperties(i,e),d){l=function(e,t,n){function i(){return this===t&&console.warn("Deprecated - "+p.getInfoForObject(t).objectName+"."+n+" should be moved to constructorProperties"),e.apply(this,arguments)}return i.deprecatedFunction=e,i};for(o in e)g.has(o)?delete e[o]:(a=e[o],a.value&&"function"==typeof a.value&&!a.value.__isConstructor__?a.value=l(a.value,n,o):(a.get&&(a.get=l(a.get,n,o)),a.set&&(a.set=l(a.set,n,o))));p.defineProperties(n,e),p.defineProperty(n,"create",{value:function(){return new n},enumerable:!1}),i.hasOwnProperty("didCreate")||p.defineProperty(i,"didCreate",{value:n,enumerable:!1}),n.hasOwnProperty("didCreate")||p.defineProperty(n,"didCreate",{value:n,enumerable:!1})}return p.defineProperties(n,t),p.defineProperty(n,"__isConstructor__",{value:!0,enumerable:!1}),n.prototype=i,p.defineProperty(i,"constructor",{value:n,enumerable:!1}),n},writable:!0,configurable:!0,enumerable:!1}),!f){var v=Object.getPrototypeOf;Object.getPrototypeOf=function(e){return"function"==typeof e&&e.__constructorProto__?e.__constructorProto__:v.apply(Object,arguments)}}Object.defineProperty(p,"create",{configurable:!0,value:function(e,t){if(void 0!==e&&"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object prototype may only be an Object or null, not '"+e+"'");if(e=e===void 0?this:e,"function"==typeof e)return t?e.specialize(t):new e;var n=Object.create(e);return t&&p.defineProperties(n,t),n}});var y=[u];y.forEach(function(e){Object.defineProperty(Object.prototype,r+e+i,{enumerable:!1,configurable:!1,writable:!0,value:{}})}),Object.defineProperty(p,"defineProperty",{value:function(e,t,i){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object must be an object, not '"+e+"'");var d=a in i;if(l in i&&!d)throw"Cannot use distinct attribute on non-value property '"+t+"'";if(o in i)i.__proto__=d?"function"==typeof i.value?w:b:_;else{var p;p=d?"function"==typeof i.value?w:b:_;for(var f in p)f in i||(i[f]=p[f])}return i.hasOwnProperty(s)||t.charAt(0)!==r||(i.enumerable=!1),i.hasOwnProperty(u)||(i.enumerable?i.get&&!i.set?i.serializable=!1:i.writable===!1&&(i.serializable=!1):i.serializable=!1),u in i&&(n(e,u)[t]=i.serializable),i.distinct!==!0||"object"!=typeof i.value?Object.defineProperty(e,t,i):(function(e,t,n,i){var r=function(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})};n.constructor===Object&&Object.getPrototypeOf(n)===c?0!==Object.keys(n).length?Object.defineProperty(i,e,{configurable:!0,get:function(){var e=this[t];if(!e){var i;e={};for(i in n)e[i]=n[i];this.hasOwnProperty(t)?this[t]=e:r(this,t,e)}return e},set:function(e){this.hasOwnProperty(t)?this[t]=e:r(this,t,e)}}):Object.defineProperty(i,e,{configurable:!0,get:function(){var e=this[t];return e||(e={},this.hasOwnProperty(t)?this[t]=e:r(this,t,e)),e},set:function(e){this.hasOwnProperty(t)?this[t]=e:r(this,t,e)}}):(n.__proto__||Object.getPrototypeOf(n))===h?0!==n.length?Object.defineProperty(i,e,{configurable:!0,get:function(){var e=this[t];if(!e){var i,o;for(e=[],i=0;(o=n[i])!==void 0;i++)e[i]=o;this.hasOwnProperty(t)?this[t]=e:r(this,t,e)}return e},set:function(e){this.hasOwnProperty(t)?this[t]=e:r(this,t,e)}}):Object.defineProperty(i,e,{configurable:!0,get:function(){var e=this[t];return e||(e=[],this.hasOwnProperty(t)?this[t]=e:r(this,t,e)),e},set:function(e){this.hasOwnProperty(t)?this[t]=e:r(this,t,e)}}):n.constructor.prototype===Object.getPrototypeOf(n)?Object.defineProperty(i,e,{configurable:!0,get:function(){var e=this[t];if(!e){var i;e=new n.constructor;for(i in n)e[i]=n[i];this.hasOwnProperty(t)?this[t]=e:r(this,t,e)}return e},set:function(e){this.hasOwnProperty(t)?this[t]=e:r(this,t,e)}}):Object.defineProperty(i,e,{configurable:!0,get:function(){var e=this[t];return e||(e=Object.create(n.__proto__||Object.getPrototypeOf(n)),this.hasOwnProperty(t)?this[t]=e:r(this,t,e)),e},set:function(e){this.hasOwnProperty(t)?this[t]=e:r(this,t,e)}})}(t,r+t,i.value,e),void 0)}}),Object.defineProperty(p,"defineProperties",{value:function(e,t){if("object"!=typeof t||null===t)throw new TypeError("Properties must be an object, not '"+t+"'");for(var n in t)"_bindingDescriptors"!==n&&this.defineProperty(e,n,t[n]);return e}});var _={enumerable:!0,configurable:!0,serializable:!0},b={writable:!0,enumerable:!0,configurable:!0,serializable:"reference"},w={writable:!0,enumerable:!1,configurable:!0,serializable:!1};p.defineProperty(p,"didCreate",{value:Function.noop});var C=function(e,t){for(var n,i,r,o,a,s,l,u;l===void 0&&null!==e;){for(n=Object.getOwnPropertyNames(e),o=0,a=n.length,o;a>o;o++)if(i=n[o],r=Object.getOwnPropertyDescriptor(e,i),null!=(s=r.value)){if(s===t||s.deprecatedFunction&&s.deprecatedFunction===t){u=Object.getPropertyDescriptor(Object.getPrototypeOf(e),i),l=u?u.value:null;break}}else if(null!=(s=r.get)){if(s===t||s.deprecatedFunction&&s.deprecatedFunction===t){u=Object.getPropertyDescriptor(Object.getPrototypeOf(e),i),l=u?u.get:null;break}}else if(null!=(s=r.set)&&(s===t||s.deprecatedFunction&&s.deprecatedFunction===t)){u=Object.getPropertyDescriptor(Object.getPrototypeOf(e),i),l=u?u.set:null;break}e=Object.getPrototypeOf(e)}return l},x=function(){var e=C(this,x.caller);return"function"==typeof e?C(this,x.caller).bind(this):Function.noop};p.defineProperty(p,"super",{get:x}),p.defineProperty(p.prototype,"super",{get:x}),p.defineProperty(p,"getSerializablePropertyNames",{value:function(e){var t=[],n=e._serializableAttributeProperties;if(n)for(var i in n)n[i]&&t.push(i);return t}}),p.defineProperty(p,"getPropertyAttribute",{value:function(e,t,n){var o=r+n+i,a=e[o];return a?a[t]:void 0}}),p.defineProperty(p,"getPropertyAttributes",{value:function(e,t){var n={},o=r+t+i,a=e[o];if(a){for(var s in a)n[s]=a[s];return n}}});var E={isInstance:{value:!0}},S={objectName:{value:"Function"},isInstance:{value:!0}};p.defineProperty(p,"getInfoForObject",{value:function(e){var t,n;if(T.call(e,"_montage_metadata"))return e._montage_metadata;if(t=e._montage_metadata||e.constructor&&e.constructor._montage_metadata||null,n=e.constructor===Function?S:E,e===Object.prototype)return Object.create(t,n);try{return Object.defineProperty(e,"_montage_metadata",{enumerable:!1,writable:!0,value:Object.create(t,n)})._montage_metadata}catch(i){return e._montage_metadata=Object.create(t,n)}}});var O=e("core/uuid");"undefined"!=typeof window&&(window.uuid=O.generate());var T=Object.prototype.hasOwnProperty,P=function(){var e=O.generate(),t=p.getInfoForObject(this);try{null!==t&&t.isInstance===!1?(this._uuid=e,Object.defineProperty(this,"uuid",{get:function(){return this.hasOwnProperty("uuid")?this._uuid:P.call(this)}})):(t.isInstance&&Object.defineProperty(this,"uuid",{configurable:!0,enumerable:!1,writable:!1,value:e}),!(this instanceof Element)&&t.isInstance&&a in(Object.getOwnPropertyDescriptor(this,"uuid")||{})&&o in this||(this._uuid=e))}catch(n){this._uuid=e}return e},M=function M(){return T.call(this,"_uuid")?this._uuid:P.call(this)};Object.defineProperty(Object.prototype,"_uuid",{enumerable:!1,value:null,writable:!0}),Object.defineProperty(Object.prototype,"uuid",{configurable:!0,get:M,set:function(){}}),p.defineProperty(p,"identifier",{value:null,serializable:!0}),p.defineProperty(p.prototype,"identifier",{value:null,serializable:!0}),p.defineProperty(p.prototype,"equals",{value:function(e){return e?this===e||this.uuid===e.uuid:!1}}),p.defineProperty(p,"equals",{value:p.prototype.equals}),p.defineProperty(p.prototype,"callDelegateMethod",{value:function(e){var t,n,i=this.delegate;return"string"==typeof this.identifier&&(t=this.identifier+e.toCapitalized(),i&&"function"==typeof(n=i[t]))?(h.shift.call(arguments),n.apply(i,arguments)):i&&"function"==typeof(n=i[e])?(h.shift.call(arguments),n.apply(i,arguments)):void 0}});var D=e("collections/listen/property-changes");Object.addEach(p,D.prototype),Object.addEach(p.prototype,D.prototype),e("core/bindings"),e("core/paths"),e("core/serialization/bindings"),t._blueprintModuleIdDescriptor={serializable:!1,enumerable:!1,get:function(){var e=p.getInfoForObject(this),t=e&&!e.isInstance?this:this.constructor;if(!Object.getOwnPropertyDescriptor(t,"_blueprintModuleId")||!t._blueprintModuleId){e=p.getInfoForObject(t);var n=e.moduleId,i=n.lastIndexOf("/"),r=n.lastIndexOf(".");i=-1===i?0:i+1,r=-1===r?n.length:r,r=i>r?n.length:r,p.defineProperty(t,"_blueprintModuleId",{enumerable:!1,value:n.slice(0,r)+".meta"})}return t._blueprintModuleId}},t._blueprintDescriptor={serializable:!1,enumerable:!1,get:function(){var n=p.getInfoForObject(this),i=n&&!n.isInstance?this:this.constructor;if(!Object.getOwnPropertyDescriptor(i,"_blueprint")||!i._blueprint){var r=i.blueprintModuleId;if(""===r)throw new TypeError("Blueprint moduleId undefined for the module '"+JSON.stringify(i)+"'");t._blueprintDescriptor.BlueprintModulePromise||(t._blueprintDescriptor.BlueprintModulePromise=e.async("core/meta/module-blueprint").get("ModuleBlueprint")),p.defineProperty(i,"_blueprint",{enumerable:!1,value:t._blueprintDescriptor.BlueprintModulePromise.then(function(e){var t=p.getInfoForObject(i);return e.getBlueprintWithModuleId(r,t.require).fail(function(t){if(-1!==t.message.indexOf("Can't XHR"))return e.createDefaultBlueprintForObject(i).then(function(e){return e});throw t})})})}return i._blueprint},set:function(t){var n,i=p.getInfoForObject(this),r=i&&!i.isInstance?this:this.constructor;if(null===t)n=null;else{if("function"==typeof t.then)throw new TypeError("Object blueprint should not be a promise");t.blueprintInstanceModule=r.blueprintModule,n=e("core/promise").Promise.resolve(t)}p.defineProperty(r,"_blueprint",{enumerable:!1,value:n})}}}});