montageDefine("bfd16e7","core/meta/object-property",{dependencies:["montage","core/exception","core/meta/blueprint","core/logger"],factory:function(e,t){"use strict";var n=e("montage").Montage,i=e("core/exception").Exception;e("core/meta/blueprint").Blueprint;var r=e("core/meta/blueprint").Binder,a=e("core/logger").logger("object-property");t.ObjectProperty=n.specialize({constructor:{value:function(){this.super()}},init:{serializable:!1,enumerable:!1,value:function(){return this}},apply:{value:function(e,t){if(!e.hasOwnProperty("blueprint")){var i;i=n.getInfoForObject(e),null!=i&&i.isInstance===!1&&(t===void 0?t=r.manager.blueprintForPrototype(i.objectName,i.moduleId):(t.prototypeName!==i.objectName||t.moduleId!==i.moduleId)&&(t=null),this.applyWithBlueprint(e,t))}}},applyWithBlueprint:{value:function(e,t){null!=t&&(this.addProperties(e,t),null!==t.parent&&this.apply(Object.getPrototypeOf(e),t))}},addProperties:{value:function(e,t){for(var i,r=0;i=t.propertyBlueprints[r++];)i.isDerived?this.addDerivedProperty(e,i):i.isAssociation?this.addAssociation(e,i):this.addProperty(e,i);n.defineProperty(e,"_blueprint",{serializable:!1,enumerable:!1,value:t}),n.defineProperty(e,"blueprint",{enumerable:!1,serializable:!1,get:function(){return this._blueprint}}),n.defineProperty(e,"blueprintGet",{serializable:!1,enumerable:!1,value:this.blueprintGet}),n.defineProperty(e,"blueprintSet",{serializable:!1,enumerable:!1,value:this.blueprintSet})}},addProperty:{value:function(e,t){this.addPropertyStorage(e,t),this.addPropertyDefinition(e,t),this.addPropertyStoredValue(e,t)}},addPropertyStorage:{value:function(e,t){var i="_"+t.name,r=null;e.hasOwnProperty(i)?a.isError&&a.error("We have an issue here. The developer should not override the storage value for "+i+"."):(r=t.isToMany?{value:[],enumerable:!1,serializable:!0,distinct:!0}:{value:null,enumerable:!1,serializable:!0},n.defineProperty(e,i,r))}},addPropertyDefinition:{value:function(e,t){var i=t.name,r=null;e.hasOwnProperty(i)?a.isDebug&&a.debug("The developer has already created the property "+i+" method do nothing."):(r={get:function(){return this.blueprintGet(i)},enumerable:!0,serializable:!1},t.readOnly||(r.set=function(e){return this.blueprintSet(i,e)}),n.defineProperty(e,i,r))}},blueprintGet:{value:function(e){var t=this.blueprint.propertyBlueprintForName(e),n="_"+t.name;return this[n]},enumerable:!1,serializable:!1},blueprintSet:{value:function(e,t){var n=this.blueprint.propertyBlueprintForName(e),r="_"+n.name;if(null==t&&n.denyDelete)throw(new i).initWithMessageTargetAndMethod("Deny Delete",this,n.name);this[r]=t},enumerable:!1,serializable:!1},addPropertyStoredValue:{value:function(e,t){var i=t.name+"$Storage",r=null;e.hasOwnProperty(i)?a.isError&&a.error("We have an issue here. The developer should not override the stored value for "+i+"."):(r=t.isToMany?{value:[],enumerable:!1,serializable:!1,distinct:!0}:{value:null,enumerable:!1,serializable:!1},n.defineProperty(e,i,r))}},addAssociation:{value:function(e,t){this.addPropertyStorage(e,t),this.addAssociationDefinition(e,t),this.addPropertyStoredValue(e,t)}},addAssociationDefinition:{value:function(e,t){t.isToMany?this.addToManyAssociationDefinition(e,t):this.addToOneAssociationDefinition(e,t)}},addToOneAssociationDefinition:{value:function(e,t){var i=t.name.toCapitalized(),r="addTo"+i;e.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(e,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="removeFrom"+i,e.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(e,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="clear"+i,e.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(e,r,{serializable:!1,enumerable:!1,value:function(){return null}})}},addToManyAssociationDefinition:{value:function(e,t){var i=t.name.toCapitalized(),r="addTo"+i;e.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(e,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="removeFrom"+i,e.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(e,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="clear"+i,e.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(e,r,{serializable:!1,enumerable:!1,value:function(){return null}})}},addDerivedProperty:{value:function(){}}})}});